<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="d3.min.js"></script>
		<script type="text/javascript" src="jquery-2.0.3.min.js"></script>

		<script type="text/javascript">
		var fileContent='';
		var theLocation='./master.txt';

		</script>
	</head>
	<body>
		<p>Hello!</p>
		<style>
		  #byte_content {
		    margin: 5px 0;
		    max-height: 100px;
		    overflow-y: auto;
		    overflow-x: hidden;
		  }
		  #byte_range { margin-top: 5px; }
		</style>

		<input type="file" id="files" name="file" /> Read bytes: 
		<span class="readBytesButtons">
		  <button>entire file</button>
		</span>
		<div id="byte_range"></div>
		<div id="byte_content"></div>

		<script>
			function loadData(content) {
				var dataset = content.split("\n");
				var uniqueNames = [];
				$.each(dataset, function(i, el){
    				if($.inArray(el, uniqueNames) === -1) uniqueNames.push(el);
				});

				dataset = uniqueNames;
				index = dataset.indexOf("");
				dataset.splice(index,1);
				var w = 5000;
				var h = 5000;
				var svg = d3.select("body")
				            .append("svg")
				            .attr("width", w)   // <-- Here
				            .attr("height", h);	
				var elem = svg.selectAll("g myCircleText")
        			.data(dataset)	

        		var elemEnter = elem.enter()
        			.append("g")
				
				var circles = elemEnter.selectAll("circle")
    				.data(dataset)
    				.enter()
    				.append("circle")

    			circles.attr("cx", function(d, i) {
            		return 50;
        		})
       			.attr("cy", function(d, i) {
            		return (i * 50) + 25;
        		})
       			.attr("r", function(d, i) {
            		return 20;
       			});

       			elemEnter.selectAll("text")
       			.data(dataset)
       			.enter()
       			.append("text")
       			.attr("x", function(d, i) {
            		return 50;
        		})
        		.attr("y", function(d, i) {
            		return (i * 50) + 25;
        		})
        		.attr("font-size", "20px")
        		.text(function(d){return d});

    			


			}
			function readBlob(opt_startByte, opt_stopByte) {

			    var files = document.getElementById('files').files;
			    if (!files.length) {
			      alert('Please select a file!');
			      return;
			    }

			    var file = files[0];
			    var start = parseInt(opt_startByte) || 0;
			    var stop = parseInt(opt_stopByte) || file.size - 1;

			    var reader = new FileReader();

			    // If we use onloadend, we need to check the readyState.
			    reader.onloadend = function(evt) {
			      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
			        var content = evt.target.result;
			        loadData(content);
			      }
			    };

			    var blob = file.slice(start, stop + 1);
			    reader.readAsText(blob);
		  	}
		  
		  document.querySelector('.readBytesButtons').addEventListener('click', function(evt) {
		    if (evt.target.tagName.toLowerCase() == 'button') {
		      var startByte = evt.target.getAttribute('data-startbyte');
		      var endByte = evt.target.getAttribute('data-endbyte');
		      readBlob(startByte, endByte);
		    }
		  }, false);
		</script>
    		
	</body>
</html>