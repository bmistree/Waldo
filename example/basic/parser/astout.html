
   <html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <script type="text/javascript" src="../parser/ast/d3/d3.v2.js"></script>

<style type="text/css">
.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node {
  font: 8px sans-serif;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1.5px;
}
</style>

  </head>
  <body>
    <div id="chart"></div>

<script>
var w = 5000,
    h = 5000;

var tree = d3.layout.tree()
    .size([w, h/3 ]);

var VERTICAL_SPACING = 8;


var diagonal = d3.svg.diagonal()
    .projection(function(d) { return [d.x, d.y]; });

var vis = d3.select("#chart").append("svg")
    .attr("width", w)
    .attr("height", h)
    .append("g")
    .attr("transform", "translate(-40, 40)");


function exec (json) {
  var nodes = tree.nodes(json);

  //draws the connections between the items  
  var link = vis.selectAll("path.link")
      .data(tree.links(nodes))
      .enter().append("path")
      .attr("class", "link")
      .attr("d", diagonal);

    
  //controls where the circles and text actually get drawn.  
  var node = vis.selectAll("g.node")
      .data(nodes)
      .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

  node.append("circle")
      .attr("r", 4.5); //circle radius


  node.append("text")
      .attr("dx", function(d) {
       if (d.children)
          -8;
       else
       {
          if(d.drawHigh)
            return 2;
       }
       return -8;
       })
      .attr("dy", function(d) { if (d.drawHigh) return -8; return 12;})
      .attr("text-anchor", function(d) { return d.children ? "end" : "start"; })
      .text(function(d) { return d.name; });


  //draws value
  node.append("text")
      .attr("dx", function(d) {
       if (d.children)
          -8;
       else
       {
          if(d.drawHigh)
            return 2;
       }
       return -8;
       })
      .attr("dy", function(d)
                  {
                      if (d.drawHigh)
                          return -8 + 1*VERTICAL_SPACING;
                      return 12 + 1*VERTICAL_SPACING;
                  })
      .attr("text-anchor", function(d) { return d.children ? "end" : "start"; })
      .text(function(d)
            {
               if(d.value)
                 return d.value;
               return '--';
            });

  //draws type
  node.append("text")
      .attr("dx", function(d) {
       if (d.children)
          -8;
       else
       {
          if(d.drawHigh)
            return 2;
       }
       return -8;
       })
      .attr("dy", function(d)
                  {
                      if (d.drawHigh)
                          return -8 + 2*VERTICAL_SPACING;
                      return 12 + 2*VERTICAL_SPACING;
                  })
      .attr("text-anchor", function(d) { return d.children ? "end" : "start"; })
      .text(function(d)
            {
               if(d.type)
                 return d.type;
               return '--';
            });

  //draws slice annotation name
  node.append("text")
      .attr("dx", function(d) {
       if (d.children)
          -8;
       else
       {
          if(d.drawHigh)
            return 2;
       }
       return -8;
       })
      .attr("dy", function(d)
                  {
                      if (d.drawHigh)
                          return -8 + 3*VERTICAL_SPACING;
                      return 12 + 3*VERTICAL_SPACING;
                  })
      .attr("text-anchor", function(d) { return d.children ? "end" : "start"; })
      .text(function(d)
            {
               if(d.sliceAnnotationName)
                 return d.sliceAnnotationName;
               return '--';
            });


  //draws slice annotation type name
  node.append("text")
      .attr("dx", function(d) {
       if (d.children)
          -8;
       else
       {
          if(d.drawHigh)
            return 2;
       }
       return -8;
       })
      .attr("dy", function(d)
                  {
                      if (d.drawHigh)
                          return -8 + 4*VERTICAL_SPACING;
                      return 12 + 4*VERTICAL_SPACING;
                  })
      .attr("text-anchor", function(d) { return d.children ? "end" : "start"; })
      .text(function(d)
            {
               if(d.sliceAnnotationType)
                 return d.sliceAnnotationType;
               return '--';
            });

}


exec(getJSON());


function getJSON()
{
    return {
	"name": "ROOT",
	"drawHigh": false,
	"children": [
	{
		"name": "IDENTIFIER",
		"value": "Basic",
		"drawHigh": true
	},
	{
		"name": "ALIAS_SECTION",
		"drawHigh": false,
		"children": [
		{
			"name": "IDENTIFIER",
			"value": "Requester",
			"drawHigh": true
		},
		{
			"name": "IDENTIFIER",
			"value": "Incrementer",
			"drawHigh": false
		}]
	},
	{
		"name": "TRACE_SECTION",
		"drawHigh": true,
		"children": [
		{
			"name": "TRACE_LINE",
			"drawHigh": false,
			"children": [
			{
				"name": "IDENTIFIER",
				"value": "other_side_increment",
				"drawHigh": true
			},
			{
				"name": "TRACE_ITEM",
				"drawHigh": false,
				"children": [
				{
					"name": "IDENTIFIER",
					"value": "Requester",
					"drawHigh": true
				},
				{
					"name": "IDENTIFIER",
					"value": "request_increment",
					"drawHigh": false
				}]
			},
			{
				"name": "TRACE_ITEM",
				"drawHigh": true,
				"children": [
				{
					"name": "IDENTIFIER",
					"value": "Incrementer",
					"drawHigh": false
				},
				{
					"name": "IDENTIFIER",
					"value": "perform_increment",
					"drawHigh": true
				}]
			}]
		}]
	},
	{
		"name": "SHARED_SECTION",
		"drawHigh": false
	},
	{
		"name": "ENDPOINT",
		"drawHigh": true,
		"children": [
		{
			"name": "IDENTIFIER",
			"value": "Requester",
			"drawHigh": false
		},
		{
			"name": "ENDPOINT_BODY_SECTION",
			"drawHigh": true,
			"children": [
			{
				"name": "ENDPOINT_GLOBAL_SECTION",
				"drawHigh": false
			},
			{
				"name": "ENDPOINT_FUNCTION_SECTION",
				"drawHigh": true,
				"children": [
				{
					"name": "PUBLIC_FUNCTION",
					"drawHigh": false,
					"children": [
					{
						"name": "IDENTIFIER",
						"value": "increment",
						"drawHigh": true
					},
					{
						"name": "FUNCTION_TYPE_LIST",
						"drawHigh": false,
						"children": [
						{
							"name": "TYPE",
							"value": "Number",
							"drawHigh": true
						}]
					},
					{
						"name": "FUNCTION_DECL_ARGLIST",
						"drawHigh": true,
						"children": [
						{
							"name": "FUNCTION_DECL_ARG",
							"drawHigh": false,
							"children": [
							{
								"name": "TYPE",
								"value": "Number",
								"drawHigh": true
							},
							{
								"name": "IDENTIFIER",
								"value": "to_increment",
								"drawHigh": false
							}]
						}]
					},
					{
						"name": "FUNCTION_BODY",
						"drawHigh": false,
						"children": [
						{
							"name": "FUNCTION_BODY_STATEMENT",
							"drawHigh": true,
							"children": [
							{
								"name": "RETURN_STATEMENT",
								"drawHigh": false,
								"children": [
								{
									"name": "FUNCTION_ARGLIST",
									"drawHigh": true,
									"children": [
									{
										"name": "FUNCTION_CALL",
										"drawHigh": false,
										"children": [
										{
											"name": "IDENTIFIER",
											"value": "request_increment",
											"drawHigh": true
										},
										{
											"name": "FUNCTION_ARGLIST",
											"drawHigh": false,
											"children": [
											{
												"name": "IDENTIFIER",
												"value": "to_increment",
												"drawHigh": true
											}]
										}]
									}]
								}]
							}]
						}]
					}]
				}]
			}]
		}]
	},
	{
		"name": "ENDPOINT",
		"drawHigh": false,
		"children": [
		{
			"name": "IDENTIFIER",
			"value": "Incrementer",
			"drawHigh": true
		},
		{
			"name": "ENDPOINT_BODY_SECTION",
			"drawHigh": false,
			"children": [
			{
				"name": "ENDPOINT_GLOBAL_SECTION",
				"drawHigh": true,
				"children": [
				{
					"name": "DECLARATION",
					"drawHigh": false,
					"children": [
					{
						"name": "TYPE",
						"value": "Number",
						"drawHigh": true
					},
					{
						"name": "IDENTIFIER",
						"value": "amt_to_increment_by",
						"drawHigh": false
					}]
				}]
			},
			{
				"name": "ENDPOINT_FUNCTION_SECTION",
				"drawHigh": false,
				"children": [
				{
					"name": "ONCREATE_FUNCTION",
					"drawHigh": true,
					"children": [
					{
						"name": "IDENTIFIER",
						"value": "onCreate",
						"drawHigh": false
					},
					{
						"name": "FUNCTION_DECL_ARGLIST",
						"drawHigh": true,
						"children": [
						{
							"name": "FUNCTION_DECL_ARG",
							"drawHigh": false,
							"children": [
							{
								"name": "TYPE",
								"value": "Number",
								"drawHigh": true
							},
							{
								"name": "IDENTIFIER",
								"value": "amt",
								"drawHigh": false
							}]
						}]
					},
					{
						"name": "FUNCTION_BODY",
						"drawHigh": false,
						"children": [
						{
							"name": "FUNCTION_BODY_STATEMENT",
							"drawHigh": true,
							"children": [
							{
								"name": "ASSIGNMENT_STATEMENT",
								"drawHigh": false,
								"children": [
								{
									"name": "COMMA_LIST",
									"drawHigh": true,
									"children": [
									{
										"name": "IDENTIFIER",
										"value": "amt_to_increment_by",
										"drawHigh": false
									}]
								},
								{
									"name": "IDENTIFIER",
									"value": "amt",
									"drawHigh": false
								}]
							}]
						}]
					}]
				}]
			}]
		}]
	},
	{
		"name": "MessageSequenceSection",
		"drawHigh": true,
		"children": [
		{
			"name": "MessageSequence",
			"drawHigh": false,
			"children": [
			{
				"name": "IDENTIFIER",
				"value": "other_side_increment",
				"drawHigh": true
			},
			{
				"name": "MessageSequenceGlobals",
				"drawHigh": false,
				"children": [
				{
					"name": "DECLARATION",
					"drawHigh": true,
					"children": [
					{
						"name": "TYPE",
						"value": "Number",
						"drawHigh": false
					},
					{
						"name": "IDENTIFIER",
						"value": "result",
						"drawHigh": true
					}]
				}]
			},
			{
				"name": "MessageSequenceFunctions",
				"drawHigh": true,
				"children": [
				{
					"name": "MessageSendSequenceFunction",
					"drawHigh": false,
					"children": [
					{
						"name": "IDENTIFIER",
						"value": "Requester",
						"drawHigh": true
					},
					{
						"name": "IDENTIFIER",
						"value": "request_increment",
						"drawHigh": false
					},
					{
						"name": "FUNCTION_DECL_ARGLIST",
						"drawHigh": true,
						"children": [
						{
							"name": "FUNCTION_DECL_ARG",
							"drawHigh": false,
							"children": [
							{
								"name": "TYPE",
								"value": "Number",
								"drawHigh": true
							},
							{
								"name": "IDENTIFIER",
								"value": "what_to_increment",
								"drawHigh": false
							}]
						}]
					},
					{
						"name": "FUNCTION_BODY",
						"drawHigh": false
					},
					{
						"name": "FUNCTION_DECL_ARGLIST",
						"drawHigh": true,
						"children": [
						{
							"name": "FUNCTION_DECL_ARG",
							"drawHigh": false,
							"children": [
							{
								"name": "TYPE",
								"value": "Number",
								"drawHigh": true
							},
							{
								"name": "IDENTIFIER",
								"value": "result",
								"drawHigh": false
							}]
						}]
					}]
				},
				{
					"name": "MessageReceiveSequenceFunction",
					"drawHigh": true,
					"children": [
					{
						"name": "IDENTIFIER",
						"value": "Incrementer",
						"drawHigh": false
					},
					{
						"name": "IDENTIFIER",
						"value": "perform_increment",
						"drawHigh": true
					},
					{
						"name": "FUNCTION_BODY",
						"drawHigh": false,
						"children": [
						{
							"name": "FUNCTION_BODY_STATEMENT",
							"drawHigh": true,
							"children": [
							{
								"name": "ASSIGNMENT_STATEMENT",
								"drawHigh": false,
								"children": [
								{
									"name": "COMMA_LIST",
									"drawHigh": true,
									"children": [
									{
										"name": "IDENTIFIER",
										"value": "result",
										"drawHigh": false
									}]
								},
								{
									"name": "+",
									"drawHigh": false,
									"children": [
									{
										"name": "IDENTIFIER",
										"value": "what_to_increment",
										"drawHigh": true
									},
									{
										"name": "IDENTIFIER",
										"value": "amt_to_increment_by",
										"drawHigh": false
									}]
								}]
							}]
						}]
					}]
				}]
			}]
		}]
	},
	{
		"name": "STRUCT_SECTION",
		"drawHigh": false
	}]
};
}

</script>


  </body>
</html>

    